<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--<meta name="twitter:card" content="summary"/>
    <meta name="twitter:title" content="Moving from Ghost to HUGO"/>
    <meta name="twitter:description" content=""/>
    <meta name="twitter:site" content="@vjeantet"/>-->
    <meta property="og:title" content="steviekwok的博客" />
    <meta property="og:site_name" content="steviekwok的博客" />
    <meta property="og:url" content="https://www.steviekwok.top/" />
    <meta property="og:image" content="/images/logo.png"/>
    <meta property="og:type" content="website" />
    
    <meta property="article:published_time" content="<?php echo date(DATE_ATOM, strtotime($art['pubtime'])); ?>" />

    <title><?php echo $art['title'];?> - steviekwok的博客</title>
    
    <meta name="keywords" content="php,nginx">
  
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="shortcut icon" href="https://www.steviekwok.top/favicon.ico" />
    <link rel="bookmark" href="https://www.steviekwok.top/favicon.ico" type="image/x-icon" /> 

    <link rel='stylesheet' type='text/css' href='/static/css/screen.css'>
    <script type="text/javascript" src="/ueditor/scripts/shCore.js"></script>
    <!--SyntaxHighlighter的对各个编程语言解析的脚本-->
    <script type="text/javascript" src="/ueditor/scripts/shBrushJScript.js"></script>
    <script type="text/javascript" src="/ueditor/scripts/shBrushPhp.js"></script>
    <script type="text/javascript" src="/ueditor/scripts/shBrushJava.js"></script>
    <script type="text/javascript" src="/ueditor/scripts/shBrushCSharp.js"></script>
    <script type="text/javascript" src="/ueditor/scripts/shBrushCpp.js"></script>
    <script type="text/javascript" src="/ueditor/scripts/shBrushAS3.js"></script>
    <script type="text/javascript" src="/ueditor/scripts/shBrushPython.js"></script>
    <script type="text/javascript" src="/ueditor/scripts/shBrushVb.js"></script>
    <script type="text/javascript" src="/ueditor/scripts/shBrushSql.js"></script>
    <script type="text/javascript" src="/ueditor/scripts/shBrushXml.js"></script>
    <script type="text/javascript" src="/ueditor/scripts/shBrushPlain.js"></script>
    <!--所使用的SyntaxHighlighter样式-->
    <link type="text/css" rel="stylesheet" href="/ueditor/styles/shCoreDefault.css"/>
    <!--初始化SyntaxHighlighter的必须代码，必须放在head中，引入文件之后-->
    <script type="text/javascript">SyntaxHighlighter.all();</script>
    <!--用于消除右上角的广告-->
    <!--<script type="text/javascript">SyntaxHighlighter.defaults['toolbar'] = false;</script-->
    <link href="https://steviekwok.top/index.xml" rel="alternate" type="application/rss+xml" title="steviekwok的博客" />

    <meta name="generator" content="Hugo 0.25" />

     <?php include ROOT . '/view/header.html'; ?>
</head>
<body class="nav-closed">

<div class="nav">
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul class="sb-menu">
        <li><a href="/" title="Home">Home</a></li>
        <!-- Dropdown Menu -->
        <li>
            <a class="sb-toggle-submenu">tags<span class="sb-caret"></span></a>
            <ul class="sb-submenu">
                <?php foreach($tags as $c): ?>
                <li>
                    <a href="/tag/<?php echo $c['tag'];?>/" target="_blank">
                        <?php echo $c['tag'];?>
                        <small>(<?php echo $c['num'];?>)</small>
                    </a>
                </li>
                <?php endforeach; ?>
            </ul>
        </li>

        <li>
            <a class="sb-toggle-submenu">Categories<span class="sb-caret"></span></a>
            <ul class="sb-submenu">
                <?php foreach($cats as $c): if($c['num']): ?>
                <li>
                    <a href="/cat/<?php echo $c['catname'];?>/" class="animsition-link">
                        <?php $i=$c['lv']; while($i--): ?>&nbsp;&nbsp;&nbsp;&nbsp;<?php endwhile;
                        if($c['lv']): ?>|<?php endif;
                        while($c['lv']--): ?>-<?php endwhile;
                        echo $c['catname']; ?>
                        <small>(<?php echo $c['num'];?>)</small>
                    </a>
                </li>
                <?php else: ?>
                <li>
                    <a class="animsition-link">
                        <?php $i=$c['lv']; while($i--): ?>&nbsp;&nbsp;&nbsp;&nbsp;<?php endwhile;
                        if($c['lv']): ?>|<?php endif;
                        while($c['lv']--): ?>-<?php endwhile;
                        echo $c['catname']; ?>
                    </a>
                </li>
                <?php endif; endforeach; ?>

            </ul>
        </li>
        <li>
            <a class="sb-toggle-submenu">Links<span class="sb-caret"></span></a>
            <ul class="sb-submenu">
            <li><a href="https://www.iphpt.com" target="_blank" class="link">叶落山城秋</a></li>
            </ul>
        </li>
    </ul>

    <ul class="sb-menu secondary">
        <li><a href="/archives/"  title="归档">归档</a></li>
        <li><a href="/about/" title="about">About</a></li>
    </ul>
</div>
<span class="nav-cover"></span>

<div class="site-wrapper">
    <header class="main-header post-head no-cover">
        <nav class="main-nav overlay clearfix">
            <a class="blog-logo" href="/"><img src="/images/logo.png" alt="Blog Logo" /></a>
            <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
        </nav>
    </header>

     <main class="content" role="main">
         <div id="pop" class="window"></div>
         <article class="post">
             <header class="post-header">
                 <h1 class="post-title"><?php echo $art['title'];?></h1>
                 <small></small>
                 <section class="post-meta">
                     <?php if(isset($art['tag'])):
                      foreach($art['tag'] as $t): ?>
                     <a href="/tag/<?php echo $t; ?>/">#<?php echo $t; ?></a>,
                     <?php endforeach; endif; ?>
                     <time class="post-date" datetime="<?php echo date(DATE_ATOM, strtotime($art['pubtime'])); ?>">
                         <?php echo date('M d, Y' , strtotime($art['pubtime'])); ?>
                     </time>
                 </section>
                 <br>
             </header>
             <section class="post-content">
                 <?php echo $art['content']; ?>
             </section>
             <footer class="post-footer">
                 <figure class="author-image">
                     <a class="img" href="" style="background-image: url(/images/super.jpg)"><span class="hidden">steviekwok's Picture</span></a>
                 </figure>     
                 <span style="color: #19A1F9;font-size: 15px;">欢迎转载,但请附上原文地址哦,尊重原创,谢谢大家 本文地址: http://steviekwok.top/art/<?php echo $art_id;?>/</span>
             </footer>
         </article>
         <div class="clearfix">
             <nav class="pagination" role="navigation">
                 <?php if($art_next !== false): ?>
                 <a class="newer-posts" href="/art/<?php echo $art_next['art_id'];?>/">&larr; <?php echo $art_next['title'];?></a>
                 <?php endif; ?>
                 <?php if($art_prev !== false): ?>
                 <a class="older-posts" href="/art/<?php echo $art_prev['art_id'];?>/"><?php echo $art_prev['title'];?> &rarr;</a>
                 <?php endif; ?>
             </nav>
         </div>
         <div id="comments">
             <?php $i=0; foreach($comms as $c):?>
             <ol>
                 <li>
                     <img src="https://www.gravatar.com/avatar/<?php echo md5( strtolower(trim( $c['email'])));?>?d=mm&s=50"; alt="">
                     <cite><?php echo $c['nick']."&nbsp;&nbsp;&nbsp;";?>
                         <a name="<?php echo $c['comment_id'];?>"><?php echo "#".++$i."楼";?></a>
                     </cite>
                     <time><?php echo date('Y年m月d日 H:i' , $c['pubtime']);?></time>
                 </li>
                 <li>
                     <p><?php echo $c['content'];?></p>
                     <?php if(isset($c['adm_comm'])): ?>
                     <p style="color:#19A1F9;text-indent: 0">博主回复：<?php echo $c['adm_comm'];?></p>
                     <?php endif;?>
                 </li>
             </ol>
             <?php endforeach; ?>
         </div>
         <div id="respond" >
             <h3>Leave a Comment  (支持Gravatar头像)</h3>
             <p id='tips' style="color:red;"></p>
             <form id="comm_form" onsubmit="submit_form(); return false;">
                 <input type="hidden" name="art" value="<?php echo $art_id;?>" />
                 <p>
                     <input placeholder="昵称（必填）" name="nick" type="text" value="" size="30" />
                 </p>
                 <p>
                     <input placeholder="Email（必填，将保密）" name="email" type="text" value="" size="30" />
                 </p>
                 <p>
                     <textarea name="content" cols="45" rows="8" aria-required="true" placeholder="说点什么吧..."></textarea>
                 <p>
                     <input type="submit" value="发表评论">
                 </p>
             </form>
         </div>
     </main>
    <footer class="site-footer clearfix">
        <a id="gotop" class="icon-arrow-up" href="#" title="back to top"></a>
        <section class="copyright"><a href="#">Stevie Kwok</a> All rights reserved.粤ICP备17158644号</section>

        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>

    </footer>
</div>
<script type='text/javascript' src="/static/js/jquery-3.3.1.min.js"></script>
<script type='text/javascript' src="/static/js/jquery.fitvids.js"></script>
<script type='text/javascript' src="/static/js/index.js"></script>
<script>
    function submit_form(){
        var art = $.trim($('input[name="art"]').val());
        var name = $.trim($('input[name="nick"]').val());
        var email = $.trim($('input[name="email"]').val());
        var content = $.trim($('textarea[name="content"]').val());
        var reg= /^[1-9]{1}\d{0,3}$/;
        if(!reg.test(art)) {
            $('#tips').text('hack out');
            return;
        }
        var reg= /^[\u4e00-\u9fa50-9a-zA-Z-._&$^]{1,20}$/;
        if(!reg.test(name)) {
            $('#tips').text('请输入个正常的昵称_(:з」∠)_');
            return;
        }
        reg =  /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;
        if(!reg.test(email)){
            $('#tips').text('请填写正确的email_(:з」∠)_');
            return;
        }else if(content == '') {
            $('#tips').text('请留言_(:з」∠)_');
        }else if(content.length > 1000) {
            $('#tips').text('最多1000字啦，你可以分多次发送_(:з」∠)_');
        }
        else{
            $.ajax({
                url: "/commAjax.php",
                type: "POST",
                data: {art: art, name: name, email: email, content: content, act: "comm"},
                success: function (msg) {
                    if (msg == "done") {
                        $("#pop").css("display","block");
                        $("#pop").html("<img src='/images/sign-check-icon.png' /><span>留言成功</span>");
                        setTimeout("history.go(0);",1000);
                    } else {
                        $("#pop").css("display","block");
                        $("#pop").html("<img src='/images/cross.png' /><span style=''>留言失败"+msg+"</span>");
                        setTimeout('$("#pop").css("display","none");',3000);
                    }
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert("ajax art error");
                }
            });
        }
    }
</script>
</body>
</html>
